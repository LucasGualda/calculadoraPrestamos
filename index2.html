<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Cuotas</title>
  <style>
    :root{
      --bg:#eaf5f7;              /* azul muy claro del fondo */
      --card:#ffffff;            /* panel izquierdo */
      --primary:#e1ef3b;         /* botón verde/amarillo */
      --primary-press:#c8d72e;
      --text:#0d2430;            /* títulos */
      --muted:#5b6c77;           /* textos secundarios */
      --stroke:#e5edf0;          /* bordes inputs */
      --dark:#0c2a37;            /* panel derecho */
      --accent:#9ac8d3;          /* pequeños detalles */
      --radius:22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 70% -10%, #d7eef3 0%, var(--bg) 40%, var(--bg) 100%);
      color:var(--text);
    }

    .wrap{
      max-width: 1080px;
      margin: 28px auto;
      padding: 0 16px;
    }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 8px 30px rgba(9, 32, 43, .08);
      display:grid;
      grid-template-columns: 1.05fr .95fr;
      overflow:hidden;
      min-height: 520px;
    }

    /* Lado izquierdo (formulario) */
    .left{
      padding: 28px 28px 32px;
    }

    .header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom: 18px;
    }
    .title{font-size: 26px; font-weight: 750; letter-spacing:.1px}
    .clear{
      color: var(--muted); text-decoration: none; font-size:14px;
    }
    .clear:hover{ text-decoration: underline; }

    .grid{
      display:grid; gap:14px; grid-template-columns: 1fr 1fr;
    }
    .grid-full{ grid-column: 1 / -1; }

    label{ display:block; font-size: 13px; color: var(--muted); margin: 8px 0 6px; }

    .field{
      position:relative; display:flex; align-items:center; height:46px; border:1px solid var(--stroke);
      border-radius:12px; padding:0 12px; background:#f7fbfc;
    }
    .field:focus-within{ outline:2px solid #bfe4ee; border-color:#bfe4ee; background:#fff; }
    .prefix, .suffix{
      display:inline-flex; align-items:center; justify-content:center;
      background: #e9f3f6; color:#3b5561; font-weight:700; border-radius:10px; padding: 0 10px; height:30px; margin-right:10px;
    }
    .suffix{ margin-left:10px; margin-right:0; }
    .field input{
      appearance:none; border:0; outline:0; background:transparent; width:100%; height:100%;
      font-size:16px; color:var(--text);
    }
    .field input::-webkit-outer-spin-button,
    .field input::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }

    .radios{ display:flex; flex-direction:column; gap:12px; margin-top:8px; }
    .radio{
      display:flex; align-items:center; gap:12px; border:1px solid var(--stroke); background:#f7fbfc;
      padding:14px 14px; border-radius:12px; cursor:pointer; user-select:none;
    }
    .radio input{ accent-color:#2db0c4; width:18px; height:18px; }
    .radio strong{ font-weight:700; }

    .actions{ margin-top:18px; }
    button.primary{
      display:inline-flex; align-items:center; gap:10px; border:0; border-radius:18px; cursor:pointer;
      background: var(--primary); color:#0a1a10; font-weight:800; padding:16px 22px; font-size:16px; box-shadow: 0 6px 0 #d0de00 inset;
    }
    button.primary:active{ transform: translateY(1px); background: var(--primary-press); }
    .btn-icon{ width:18px; height:18px; }

    .error{ color:#b00020; font-size:13px; margin-top:8px; }

    /* Lado derecho (resultados) */
    .right{
      background: var(--dark);
      color:#dff3f7;
      padding: 28px;
      display:flex; align-items:center; justify-content:center; position:relative;
    }
    .results{
      max-width: 420px; text-align:center;
    }
    .results h2{ font-size:22px; margin:8px 0 10px; letter-spacing:.2px; }
    .results p{ color:#c9dbe1; margin:0 0 10px; line-height:1.5; }

    .illustration{ opacity:.9; margin:12px auto 18px; }

    .kpi{
      margin-top:10px; background:#0e3544; border:1px solid rgba(255,255,255,.06);
      border-radius:16px; padding: 14px; text-align:left; color:#e7f9ff;
    }
    .kpi .row{ display:flex; justify-content:space-between; padding:8px 4px; border-bottom:1px dashed rgba(255,255,255,.09); }
    .kpi .row:last-child{ border-bottom:0; }
    .kpi .label{ color:#b9cfd7; }
    .kpi .value{ font-weight:800; }

    .tag{
      display:inline-block; background:#0e3a4b; color:#a0d8e6; border:1px solid rgba(255,255,255,.08); padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; letter-spacing:.3px; text-transform:uppercase; margin-bottom:8px;
    }

    /* Responsive */
    @media (max-width: 950px){
      .card{ grid-template-columns: 1fr; }
      .right{ min-height: 360px; order:-1; border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
      .left{ padding-top: 22px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="region" aria-label="Calculadora de cuotas">

      <!-- Resultados (lado derecho) -->
      <aside class="right">
        <div class="results" id="results">
          <span class="tag">Resultados</span>
          <h2>Se mostrarán aquí</h2>
          <img src="./assets/images/illustration-empty.svg"/>
          <p>Completá el formulario y presioná <strong>Calcular cuotas</strong> para ver el valor mensual estimado.</p>
        </div>
      </aside>

      <!-- Formulario (lado izquierdo) -->
      <section class="left">
        <div class="header">
          <div class="title">Calculadora de Préstamo</div>
          <a class="clear" href="#" id="clearAll">Limpiar</a>
        </div>

        <form id="calcForm" novalidate>
          <div class="grid">
            <div class="grid-full">
              <label for="amount">Monto del préstamo</label>
              <div class="field">
                <span class="prefix" id="currencyPrefix">$</span>
                <input id="amount" name="amount" type="number" min="0" step="0.01" placeholder="Ej.: 2.500.000" required />
              </div>
            </div>

            <div>
              <label for="years">Plazo</label>
              <div class="field">
                <input id="years" name="years" type="number" min="1" step="1" placeholder="Años" required />
                <span class="suffix">años</span>
              </div>
            </div>

            <div>
              <label for="rate">Tasa de interés anual</label>
              <div class="field">
                <input id="rate" name="rate" type="number" min="0" step="0.01" placeholder="Ej.: 45" required />
                <span class="suffix">%</span>
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="primary" type="submit">
              <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M5 3a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5Zm2 4h10v2H7V7Zm0 4h10v2H7v-2Zm0 4h6v2H7v-2Z"/></svg>
              Calcular cuotas
            </button>
            <div id="error" class="error" role="alert" aria-live="polite"></div>
          </div>
        </form>
      </section>

    </div>
  </div>

  <script>
    const form = document.getElementById('calcForm');
    const resultsEl = document.getElementById('results');
    const errorEl = document.getElementById('error');
    const clearAll = document.getElementById('clearAll');

    const fmtCurrency = (n, currencySymbol = '$') => {
      // formateo simple con separadores; si querés ARS exacto podés reemplazar por Intl.NumberFormat
      try{
        return new Intl.NumberFormat('es-AR', { style:'currency', currency:'ARS', maximumFractionDigits:2 }).format(n);
      }catch(e){
        return currencySymbol + ' ' + (Number(n).toFixed(2)).replace(/\B(?=(\d{3})+(?!\d))/g, '.');
      }
    };

    function calcRepayment(P, annualRate, years){
      const n = years * 12;                   // cuotas mensuales
      const r = (annualRate/100) / 12;        // tasa mensual
      if (r === 0) return { monthly: P / n, totalInterest: 0, totalPaid: P };
      const factor = Math.pow(1 + r, n);
      const monthly = P * r * factor / (factor - 1);
      const totalPaid = monthly * n;
      const totalInterest = totalPaid - P;
      return { monthly, totalInterest, totalPaid };
    }

    function calcInterestOnly(P, annualRate, years){
      const r = (annualRate/100) / 12; // mensual
      const monthly = P * r;           // sólo intereses
      const totalPaid = monthly * (years*12);
      return { monthly, totalInterest: totalPaid, totalPaid };
    }

    function renderResults(kind, res){
      // const title = kind === 'interestOnly' ? 'Esquema: Sólo Intereses' : 'Esquema: Amortizable';
      const title = "Esquema: Interés";
      resultsEl.innerHTML = `
        <span class="tag">Resultado</span>
        <h2>${title}</h2>
        <div class="kpi" role="status" aria-live="polite">
          <div class="row"><span class="label">Cuota mensual estimada</span><span class="value">${fmtCurrency(res.monthly)}</span></div>
          <div class="row"><span class="label">Intereses totales</span><span class="value">${fmtCurrency(res.totalInterest)}</span></div>
          <div class="row"><span class="label">Total pagado</span><span class="value">${fmtCurrency(res.totalPaid)}</span></div>
        </div>
        <p style="margin-top:10px">Este cálculo es orientativo y no incluye gastos/impuestos adicionales.</p>
      `;
    }

    function calcularInteres(amount, rate, years) {
        const n = years * 12; // Número de cuotas
        const r = rate / 100 / 12; // Tasa mensual

        // Calcular cuota mensual
        const cuotaMensual = amount * (r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);

        // Calcular el total pagado
        const totalPagado = cuotaMensual * n;

        // Calcular intereses totales
        const interesTotal = totalPagado - amount;

        return {
            monthly: cuotaMensual.toFixed(2),
            totalInterest: interesTotal.toFixed(2),
            totalPaid: totalPagado.toFixed(2)
        };
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      errorEl.textContent = '';

      const amount = parseFloat(document.getElementById('amount').value);
      const years = parseInt(document.getElementById('years').value, 10);
      const rate = parseFloat(document.getElementById('rate').value);
      const kind = (document.querySelector('input[name="type"]:checked')||{}).value;

      if (!(amount>0) || !(years>0) || !(rate>=0)){
        errorEl.textContent = 'Completá todos los campos con valores válidos.';
        return;
      }

      const result = calcularInteres(amount,rate,years);
      // const meses = years * 12;
      // const result = calcularPrestamoFrances(amount,67,119.13,meses,"tna");

      // const result = (kind === 'interestOnly')
      //   ? calcInterestOnly(amount, rate, years)
      //   : calcRepayment(amount, rate, years);

      renderResults("interes", result);
    });

    clearAll.addEventListener('click', (e)=>{
      e.preventDefault();
      form.reset();
      errorEl.textContent='';
      resultsEl.innerHTML = `
        <span class="tag">Resultados</span>
        <h2>Se mostrarán aquí</h2>
        <img src="./assets/images/illustration-empty.svg"/>
       
        <p>Completá el formulario y presioná <strong>Calcular cuotas</strong> para ver el valor mensual estimado.</p>`;
    });
  </script>
</body>
</html>
